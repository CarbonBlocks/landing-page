{"ast":null,"code":"// pages/api/submit.js\nimport { connectToDatabase } from \"../utils/mongodb\";\nexport default async function handler(req, res) {\n  if (req.method !== \"POST\") {\n    return res.status(405).json({\n      message: \"Method Not Allowed\"\n    });\n  }\n\n  const formData = req.body;\n  formData.signUpTime = new Date();\n\n  try {\n    // Connect to MongoDB\n    const {\n      db\n    } = await connectToDatabase(); // Insert the form data into the database\n\n    await db.collection(\"formData\").insertOne(formData); // Respond with a success message\n\n    return res.status(200).json({\n      message: \"Form submitted successfully!\"\n    });\n  } catch (error) {\n    console.error(\"Error saving form data:\", error);\n    console.log(\"Form data received:\", formData);\n    console.error(\"Error saving form data:\", error.message);\n\n    if (error.message.includes(\"some specific error text\")) {\n      return res.status(400).json({\n        message: \"A specific error message\"\n      });\n    }\n\n    console.error(\"Error saving form data:\", error.message);\n    return res.status(500).json({\n      message: \"Internal Server Error\"\n    });\n  }\n}","map":{"version":3,"sources":["/Users/aaronkigler/Desktop/CompSci/carbonBlocks/landing-page/client/pages/api/submit.js"],"names":["connectToDatabase","handler","req","res","method","status","json","message","formData","body","signUpTime","Date","db","collection","insertOne","error","console","log","includes"],"mappings":"AAAA;AACA,SAASA,iBAAT,QAAkC,kBAAlC;AAEA,eAAe,eAAeC,OAAf,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;AAC9C,MAAID,GAAG,CAACE,MAAJ,KAAe,MAAnB,EAA2B;AACzB,WAAOD,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAArB,CAAP;AACD;;AAED,QAAMC,QAAQ,GAAGN,GAAG,CAACO,IAArB;AACAD,EAAAA,QAAQ,CAACE,UAAT,GAAsB,IAAIC,IAAJ,EAAtB;;AAEA,MAAI;AACF;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAS,MAAMZ,iBAAiB,EAAtC,CAFE,CAIF;;AACA,UAAMY,EAAE,CAACC,UAAH,CAAc,UAAd,EAA0BC,SAA1B,CAAoCN,QAApC,CAAN,CALE,CAOF;;AACA,WAAOL,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAArB,CAAP;AACD,GATD,CASE,OAAOQ,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACD,KAAR,CAAc,yBAAd,EAAyCA,KAAzC;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCT,QAAnC;AACAQ,IAAAA,OAAO,CAACD,KAAR,CAAc,yBAAd,EAAyCA,KAAK,CAACR,OAA/C;;AAEA,QAAIQ,KAAK,CAACR,OAAN,CAAcW,QAAd,CAAuB,0BAAvB,CAAJ,EAAwD;AACtD,aAAOf,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,QAAAA,OAAO,EAAE;AAAX,OAArB,CAAP;AACD;;AACDS,IAAAA,OAAO,CAACD,KAAR,CAAc,yBAAd,EAAyCA,KAAK,CAACR,OAA/C;AACA,WAAOJ,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAArB,CAAP;AACD;AACF","sourcesContent":["// pages/api/submit.js\nimport { connectToDatabase } from \"../utils/mongodb\";\n\nexport default async function handler(req, res) {\n  if (req.method !== \"POST\") {\n    return res.status(405).json({ message: \"Method Not Allowed\" });\n  }\n\n  const formData = req.body;\n  formData.signUpTime = new Date();\n\n  try {\n    // Connect to MongoDB\n    const { db } = await connectToDatabase();\n\n    // Insert the form data into the database\n    await db.collection(\"formData\").insertOne(formData);\n\n    // Respond with a success message\n    return res.status(200).json({ message: \"Form submitted successfully!\" });\n  } catch (error) {\n    console.error(\"Error saving form data:\", error);\n    console.log(\"Form data received:\", formData);\n    console.error(\"Error saving form data:\", error.message);\n\n    if (error.message.includes(\"some specific error text\")) {\n      return res.status(400).json({ message: \"A specific error message\" });\n    }\n    console.error(\"Error saving form data:\", error.message);\n    return res.status(500).json({ message: \"Internal Server Error\" });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}